{% extends "base.html" %}
{% block title %}Box Plot{% endblock %}
{% block content %}
<div class="min-h-screen flex flex-col items-center justify-start bg-gray-900 py-8">
    <h2 class="text-2xl font-bold mb-4 text-gray-100 text-center">Box Plot</h2>
    
    {% if not numeric_columns %}
    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ—Ç —á–∏—Å–ª–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö -->
    <div class="max-w-2xl mx-auto bg-red-900/20 border border-red-500 rounded-xl p-6 text-center mb-6">
        <div class="text-4xl mb-4">‚ö†Ô∏è</div>
        <h3 class="text-xl font-bold text-red-400 mb-2">No Numeric Data Found</h3>
        <p class="text-red-300 mb-4">Box plots require numeric data. Your dataset contains only text columns.</p>
        <a href="/upload" class="inline-block bg-red-600 text-white px-6 py-3 rounded-xl hover:bg-red-700 transition">
            üìÅ Upload Different Data
        </a>
    </div>
    {% else %}
    
    <!-- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ (—Ç–∞–∫–∞—è –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –≤ scatter.html) -->
    <form method="post" class="flex flex-col md:flex-row items-center gap-4 bg-gray-800 p-4 rounded-xl shadow mb-6 w-full max-w-4xl">
        <div class="w-full md:w-auto">
            <label class="block md:inline text-gray-300 text-sm mb-2 md:mb-0">Variable (Y axis)</label>
            <select name="y" class="w-full md:w-auto md:ml-2 rounded p-3 md:p-1 bg-gray-700 text-gray-100 border-none focus:ring-2 focus:ring-blue-400 text-lg md:text-base">
                {% for col in numeric_columns %}
                  <option value="{{ col }}" {% if col == y %}selected{% endif %}>{{ col }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="w-full md:w-auto">
            <label class="block md:inline text-gray-300 text-sm mb-2 md:mb-0">Group by</label>
            <select name="group" class="w-full md:w-auto md:ml-2 rounded p-3 md:p-1 bg-gray-700 text-gray-100 border-none focus:ring-2 focus:ring-blue-400 text-lg md:text-base">
                <option value="">No grouping</option>
                {% for col in columns %}
                  <option value="{{ col }}" {% if col == group %}selected{% endif %}>{{ col }}</option>
                {% endfor %}
            </select>
        </div>
        
        <button type="submit" class="w-full md:w-auto md:ml-4 px-6 py-3 md:px-4 md:py-2 bg-blue-700 text-white rounded-xl font-bold hover:bg-blue-800 transition text-lg md:text-base">
            üì¶ Plot!
        </button>
    </form>
    
    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ (—Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ –≤ scatter) -->
    <div class="w-full max-w-6xl flex justify-center bg-gray-900 p-4 rounded-xl shadow">
        <div class="plot-container w-full">
            {{ plot_html | safe }}
        </div>
    </div>
    
    {% endif %}
</div>

<!-- CSS —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∏–∫–∞ (—Ç–∞–∫–∏–µ –∂–µ –∫–∞–∫ –≤ scatter) -->
<style>
.plot-container {
    width: 100%;
    overflow-x: auto; /* –ï—Å–ª–∏ –≥—Ä–∞—Ñ–∏–∫ –≤—Å–µ —Ä–∞–≤–Ω–æ —à–∏—Ä–æ–∫–∏–π */
}

.plot-container .plotly-graph-div {
    width: 100% !important;
    height: 400px !important;
}

/* –°–∫—Ä—ã–≤–∞–µ–º Plotly –ø–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è */
.modebar {
    display: none !important;
}

/* –£–±–∏—Ä–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ –≥—Ä–∞—Ñ–∏–∫–µ */
.plot-container .plotly-graph-div .plotly {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è */
@media (max-width: 768px) {
    .plot-container .plotly-graph-div {
        height: 350px !important;
    }
}
</style>
{% endblock %}